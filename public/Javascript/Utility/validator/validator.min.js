$.validator.addMethod("time24",function(e,r){if(!/^\d{2}:\d{2}$/.test(e))return!1;var a=e.split(":");return!(a[0]>23||a[1]>59)},"لطفاً ساعت را از بین 00:00 تا 23:59 انتخاب نمایید."),jQuery.validator.addMethod("greaterThanDate",function(e,r,a){if(null!=$(a).val()&&""!=$(a).val()&&(null!=e&&""!=e))return $(a).val()<=e;return!0}),jQuery.validator.addMethod("greaterOrEqualThanDate",function(e,r,a){if(null!=$(a).val()&&""!=$(a).val()&&(null!=e&&""!=e))return $(a).val()<e;return!0}),jQuery.validator.addMethod("greaterThan",function(e,r,a){if(null!=$(a).val()&&""!=$(a).val()&&(null!=e&&""!=e))return parseInt($(a).val())<parseInt(e);return!0}),jQuery.validator.addMethod("greaterThanPrice",function(e,r,a){if(null!=$(a).val()&&""!=$(a).val()&&null!=e&&""!=e){var t=$(a).val().replace(/,/g,""),o=e.replace(/,/g,"");return parseFloat(t)<=parseFloat(o)}return!0}),jQuery.validator.addMethod("pattern",function(e,r){return this.optional(r)||/^(?:[1-9]\d{0,2}(?:,\d{3})*|0)(?:\.\d+)?$/.test(e)},"مقدار مبلغ صحیح نمباشد"),jQuery.validator.addMethod("mobile",function(e,r){return this.optional(r)||/^(09\d{9}|0098\d{10}|\+98\d{10})$/.test(e)},"لطفاً یک شماره معتبر وارد نمایید."),jQuery.validator.addMethod("dateISO",function(e,r){return this.optional(r)||/^(13[0-9][0-9]|14[0-9][0-9])[\/\-](0[1-9]|1[012])[\/\-](0[1-9]|[12][0-9]|3[01])$/.test(e)},"لطفاً یک تاریخ معتبر وارد نمایید."),jQuery.validator.addMethod("timeISO",function(e,r){return this.optional(r)||/^(0[1-9]|[1-9]|1[0-9]|2[0-4])[:]([0-5][0-9]|[0-9])$/.test(e)},"لطفاً یک زمان معتبر وارد نمایید."),jQuery.validator.addMethod("timeISO2",function(e,r){return this.optional(r)||/^(0[1-9]|[1-9]|1[0-9]|2[0-4])[:](30|0|00)$/.test(e)},"تنها مجاز به وارد کردن دقيقه صفر يا سي مي باشيد.");var handleLogin=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{company:{required:!0},username:{required:!0},password:{required:!0}},messages:{company:{required:"شناسه شرکت را وارد نمایید."},username:{required:"نام کاربری را وارد نمایید."},password:{required:"رمز عبور را وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#username"),a=$("#password"),t=$("#company");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{company:t.val(),userName:r.val(),password:a.val()},url:"/logIn/loginAjax",cache:!1,async:!1,success:function(e){try{var o=JSON.parse(e);if(""!=o.error)return Metronic.alert({container:"#res",place:"append",type:"danger",message:o.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),t.focus(),t.parent("div").parent("div.form-group").addClass("has-error"),r.parent("div").parent("div.form-group").addClass("has-error"),a.parent("div").parent("div.form-group").addClass("has-error"),!1;""!=o.userId?checkFinancialPeriodAndRedirect(o):alert("Problem with web service")}catch(r){return console.log(e),Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا در تحلیل پاسخ سرور",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1}}})}}),$(".login-form input").keypress(function(e){if(13==e.which)return $(".login-form").validate()&&$(".login-form").submit(),!1})},handleLogin_NEW=function(){$("#loginForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{password:{required:!0}},messages:{password:{required:"رمز عبور را وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#password");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{login_NEW:"true",password:r.val()},url:"/login/loginAjax",cache:!1,async:!1,success:function(e){window.setTimeout(function(){Metronic.stopPageLoading()},500);try{var a=JSON.parse(e);if(""!=a.error)return Metronic.alert({container:"#res",place:"append",type:"danger",message:a.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),r.parent("div").parent("div.form-group").addClass("has-error"),!1;if(""==a.userId)return Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا در وب سرویس",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1;if(Metronic.stopPageLoading(),a.updateVoucher){$("div.content:first").html(' <div class="row"><div class="col-md-12" style="text-align: center;"><i class="fa fa-spinner fa-spin fa-3x"></i><h4>در حال صدور اسناد حسابداری ، لطفا شکیبا باشید</h4></div></div>'),$.ajax({type:"POST",data:{updateVoucherInLogin:"true"},url:"/login/updateVoucherInLoginAjax",cache:!1,async:!1,success:function(e){JSON.parse(e).status,checkFinancialPeriodAndRedirect(a)}})}else checkFinancialPeriodAndRedirect(a)}catch(e){return console.log(e),Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1}}})}}),$("#loginForm input").keypress(function(e){if(13==e.which)return $("#loginForm").validate()&&$("#loginForm").submit(),!1})},handleNewAdminUser=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{username:{required:!0,minlength:4},password:{required:!0,minlength:6},password2:{required:!0,equalTo:"#password"},email:{required:!0,email:!0}},messages:{username:{required:"نام کاربری را وارد نمایید.",minlength:"نام کاربری حداقل باید چهار کارکتر داشته باشد."},password:{required:"رمز عبور را وارد نمایید.",minlength:"رمز عبور حداقل باید شش کارکتر داشته باشد."},password2:{required:"تکرار رمز عبور را عیناً وارد نمایید.",equalTo:"تکرار رمز عبور را عیناً وارد نمایید."},email:{required:"ایمیل را وارد نمایید.",email:"یک ایمیل معتبر وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#username"),a=$("#password"),t=$("#password2"),o=$("#email");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{new_admin_user:"true",username_new:r.val(),password_new:a.val(),email_new:o.val()},url:"loginchecker.php",cache:!1,async:!1,success:function(e){window.setTimeout(function(){Metronic.stopPageLoading()},500);var s=JSON.parse(e);if(""!=s.error)return Metronic.alert({container:"#res",place:"append",type:"danger",message:s.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),r.focus(),r.parent("div").parent("div.form-group").addClass("has-error"),a.parent("div").parent("div.form-group").addClass("has-error"),t.parent("div").parent("div.form-group").addClass("has-error"),o.parent("div").parent("div.form-group").addClass("has-error"),!1;""!=s.userId?checkFinancialPeriodAndRedirect(s):alert("Problem with web service")}})}}),$(".login-form input").keypress(function(e){if(13==e.which)return $(".login-form").validate()&&$(".login-form").submit(),!1})},handleNewAdminUser_NEW=function(){$("#loginFormReg").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{sms_password:{required:!0,minlength:6}},messages:{sms_password:{required:"رمز عبور را وارد نمایید.",minlength:"رمز عبور حداقل باید شش کارکتر داشته باشد."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#sms_password");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{new_admin_user_NEW:"true",password:r.val()},url:"/login/newAdminUserAjax",cache:!1,async:!1,success:function(e){window.setTimeout(function(){Metronic.stopPageLoading()},500);try{var a=JSON.parse(e);if(""!=a.error)return Metronic.alert({container:"#res",place:"append",type:"danger",message:a.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),r.focus(),r.parent("div").parent("div.form-group").addClass("has-error"),!1;if(""==a.userId)return Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا در وب سرویس",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1;$("div.content:first").html(' <div class="row"><div class="col-md-12" style="text-align: center;"><i class="fa fa-spinner fa-spin fa-3x"></i><h4>در حال صدور اسناد حسابداری ، لطفا شکیبا باشید</h4></div></div>'),$.ajax({type:"POST",url:"/login/importAutoVoucherAjax",dataType:"html",data:{import_auto_voucher:"true"},success:function(e,r,a){"true"==e&&(window.location="/user")}})}catch(e){return Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1}}})}}),$("#loginFormReg input").keypress(function(e){if(13==e.which)return $("#loginFormReg").validate()&&$("#loginFormReg").submit(),!1}),$("#send_sms_btn").click(function(){$("#mTitle").css("display","none"),$("#sTitle").css("display","")})},handleForgetPassword=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{email:{required:!0,email:!0},username1:{required:!0}},messages:{email:{required:"وارد کردن ایمیل الزامی است.",email:"لطفاً یک ایمیل معتبر وراد نمایید."},username1:{required:"نام کاربری را وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#email"),a=$("#username1");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{email:r.val(),username1:a.val()},url:"loginchecker.php",cache:!1,async:!1,success:function(e){window.setTimeout(function(){Metronic.stopPageLoading()},500);var t=JSON.parse(e);if(""!=t.error)return Metronic.alert({container:"#ress",place:"append",type:"danger",message:t.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),a.focus(),!1;""!=t.message?(Metronic.alert({container:"#ress",place:"append",type:"success",message:"اطلاعات ورود به سیستم، برای شما ارسال شد، لطفاً ایمیلتان را چک نمایید.",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"check"}),r.val(""),a.val(""),$("body").find("div.has-error").removeClass("has-error")):alert("Problem with web service")}})}}),$(".forget-form input").keypress(function(e){if(13==e.which)return $(".forget-form").validate().form()&&$(".forget-form").submit(),!1}),$("#forget-password").click(function(){var e=$("#company_code"),r=$("#username"),a=$("#password"),t=$("#captcha_code");e.val(""),r.val(""),a.val(""),t.val(""),$("body").find("span.help-block").remove(),$("body").find("div.has-error").removeClass("has-error"),$("body").find("div.display-hide").addClass("hide"),$(".login-form").hide(),$(".forget-form").show(),$("#company_code1").focus()}),$("#back-btn").click(function(){var e=$("#email"),r=$("#company_code1"),a=$("#username1");return r.val(""),a.val(""),e.val(""),$(".login-form").show(),$(".forget-form").hide(),$("#company_code").focus(),document.getElementById("captcha").src="securimage_show.php?"+Math.random(),!1})},handleForgetPassword_NEW=function(){$(".forget-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{mobile:{required:!0,mobile:!0}},messages:{mobile:{required:"وارد کردن تلفن همراه الزامی است.",mobile:"لطفاً یک شماره معتبر وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").addClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".input-icon"))},submitHandler:function(e){var r=$("#mobile"),a=$("#password");Metronic.startPageLoading({animate:!0}),$.ajax({type:"POST",data:{forget_NEW:!0,mobile:r.val()},url:"/login/forgetAjax",cache:!1,async:!1,success:function(e){window.setTimeout(function(){Metronic.stopPageLoading()},500);try{var t=JSON.parse(e);return t.result?t.result?(Metronic.alert({container:"#res",place:"append",type:"success",message:"اطلاعات ورود به سیستم، برای شما ارسال شد، لطفاً تلفن همراهتان را چک نمایید.",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"check"}),a.val(""),$(".login-form").show(),$(".forget-form").hide(),$("#password").focus(),$("#mainTitle").css("display",""),$("#forgetTitle").css("display","none"),r.val(""),$("body").find("div.has-error").removeClass("has-error"),!1):(Metronic.alert({container:"#ress",place:"append",type:"danger",message:"خطا در وب سرویس",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1):(Metronic.alert({container:"#ress",place:"append",type:"danger",message:t.message,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1)}catch(e){return Metronic.alert({container:"#ress",place:"append",type:"danger",message:"خطا",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),!1}}})}}),$(".forget-form input").keypress(function(e){if(13==e.which)return $(".forget-form").validate().form()&&$(".forget-form").submit(),!1}),$("#forget-password").click(function(){$("#mobile").val(""),$("body").find("span.help-block").remove(),$("body").find("div.has-error").removeClass("has-error"),$("body").find("div.display-hide").addClass("hide"),$(".login-form").hide(),$(".forget-form").show(),$("#mobile").focus(),$("#mainTitle").css("display","none"),$("#forgetTitle").css("display","")}),$("#back-btn").click(function(){return $("#password").val(""),$(".login-form").show(),$(".forget-form").hide(),$("#password").focus(),$("#mainTitle").css("display",""),$("#forgetTitle").css("display","none"),!1})},handleAddUser=function(){$("#user").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{name:{required:!0},family:{required:!0},username:{required:!1},password:{required:!0,minlength:6},repassword:{required:!0,minlength:6,equalTo:"#password"},fromhour:{required:!0,time24:!0},tohour:{required:!0,time24:!0},email:{required:!0,email:!0},job:{required:!1},mobile:{required:!0,mobile:!0},address:{required:!1},image:{required:!1}},messages:{name:{required:"نام را وارد نمایید."},family:{required:"نام خانوادگی را وارد نمایید."},username:{required:"نام کاربری را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید."},password:{required:"کلمه عبور را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید."},repassword:{required:"تکرار کلمه عبور را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید.",equalTo:"تکرار کلمه عبور را عیناً وارد نمایید."},fromhour:{required:"از ساعت را وارد نمایید."},tohour:{required:"تا ساعت را وارد نمایید."},email:{required:"پست الکترونیک را وارد نمایید.",email:"لطفاً یک ایمیل معتبر وراد نمایید."},job:{},mobile:{required:"شماره همراه را وارد نمایید.",mobile:"لطفاً یک شماره همراه معتبر وراد نمایید."},address:{},image:{}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){var r=new FormData(e);r.append("newuser","newuser"),document.getElementById("add_user").checked?r.append("adduser","true"):r.append("adduser","false"),document.getElementById("status").checked?r.append("userstatus","true"):r.append("userstatus","false"),document.getElementById("change_pass").checked?r.append("changepass","true"):r.append("changepass","false"),document.getElementById("is_admin").checked?r.append("isadmin","true"):r.append("isadmin","false"),Metronic.blockUI({target:"body",boxed:!0,message:"در حال دخیره..."}),$.ajax({url:"/user/newUserAjax",type:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(e){"succ"==e.substr(0,4)?window.location="/user?succ=succ":"logo"==e.substr(0,4)?window.location="./logout":Metronic.alert({container:"#res",place:"append",type:"danger",message:e.substr(4),close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"})}})}}),$("#user input").keypress(function(e){if(13==e.which)return $("#user").validate()&&$("#user").submit(),!1})},handleEditUser=function(){$("#user").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{name:{required:!0},family:{required:!0},username:{required:!1,minlength:5},password:{required:!1,minlength:6},repassword:{required:!1,minlength:6,equalTo:"#password"},fromhour:{required:!0,time24:!0},tohour:{required:!0,time24:!0},email:{required:!0,email:!0},job:{required:!1},mobile:{required:!0},address:{required:!1},image:{required:!1}},messages:{name:{required:"نام را وارد نمایید."},family:{required:"نام خانوادگی را وارد نمایید."},username:{required:"نام کاربری را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید."},password:{required:"کلمه عبور را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید."},repassword:{required:"تکرار کلمه عبور را وارد نمایید.",minlength:"لطفاً {0} کاراکتر وارد نمایید.",equalTo:"تکرار کلمه عبور را عیناً وارد نمایید."},fromhour:{required:"از ساعت را وارد نمایید."},tohour:{required:"تا ساعت را وارد نمایید."},email:{required:"پست الکترونیک را وارد نمایید.",email:"لطفاً یک ایمیل معتبر وراد نمایید."},job:{},mobile:{required:"شماره همراه را وارد نمایید."},address:{},image:{}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){var r=new FormData(e);r.append("edituser","edituser"),document.getElementById("add_user").checked?r.append("adduser","true"):r.append("adduser","false"),document.getElementById("status").checked?r.append("userstatus","true"):r.append("userstatus","false"),document.getElementById("change_pass").checked?r.append("changepass","true"):r.append("changepass","false"),document.getElementById("is_admin").checked?r.append("isadmin","true"):r.append("isadmin","false");var a=$("#usr-submit").attr("data-id");r.append("id",a);var t=$("#usr-submit").attr("data-status");r.append("status",t),Metronic.blockUI({target:"body",boxed:!0,message:"در حال ذخیره..."}),$.ajax({url:"/user/editUserAjax",type:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(e){"succ"==e.substr(0,4)?window.location="/user?succ=succ":"logo"==e.substr(0,4)?window.location="./logout":Metronic.alert({container:"#res",place:"append",type:"danger",message:e.substr(4),close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"})}})}}),$("#user input").keypress(function(e){if(13==e.which)return $("#user").validate()&&$("#user").submit(),!1})},handleTopic=function(){$("#topicForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){}}),$("#topicForm input").keypress(function(e){if(13==e.which)return $("#topicForm").validate()&&$("#topicForm").submit(),!1})},handleExcel=function(){$("#excelForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{pages:{required:!0}},messages:{pages:{required:"شماره صفحات را وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){alert("TEST")}}),$("#excelForm input").keypress(function(e){if(13==e.which)return $("#excelForm").validate()&&$("#excelForm").submit(),!1})},handleProfileEdit=function(){$("#profile_form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{name:{required:!0},family:{required:!0},email:{required:!0,email:!0},mobile:{minlength:11,maxlength:11,required:!0,digits:!0,number:!0},address:{required:!1}},messages:{name:{required:"نام  را وارد نمایید."},family:{required:"نام خانوادگی را وارد نمایید."},email:{required:"وارد کردن ایمیل الزامی است.",email:"لطفاً یک ایمیل معتبر وراد نمایید."},mobile:{required:"شماره همراه را وارد نمایید.",number:"لطفاً فقط عدد وارد نمایید.",minlength:"لطفاً {0} عدد وارد نمایید."},address:{}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control"))},submitHandler:function(e){var r={};r.name=$("#name").val(),r.family=$("#family").val(),r.email=$("#email").val(),r.mobile=$("#mobile").val(),r.address=$("#address").val(),$.ajax({type:"POST",data:{profile:JSON.stringify(r)},url:"/profile/updateAjax",success:function(e){var a=JSON.parse(e);""!=a.error?("User.015"==a.ErrorCode&&(window.location="./logout"),Metronic.alert({container:".msg_result",place:"append",type:"danger",message:a.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"})):"true"==a.result&&($(".profile-usertitle-name").html(r.name+" "+r.family).fadeIn(300).slideUp(5).fadeIn(300),Metronic.alert({container:".msg_result",place:"append",type:"success",message:"اطلاعات پروفایل با موفقیت به روز رسانی شد.",close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"check"}))}})}}),$("#profile_form input").keypress(function(e){if(13==e.which)return $("#profile_form").validate()&&$("#profile_form").submit(),!1})},handleChangePassword=function(){$("#password-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{pass:{required:!0},newpass:{required:!0,minlength:6},renewpass:{required:!0,minlength:6,equalTo:"#newpass"}},messages:{pass:{required:"رمز عبور فعلی را وارد نمایید."},newpass:{required:"رمز عبور جدید را وارد نمایید.",minlength:"حداقل 6 کاراکتر وارد نمایید."},renewpass:{required:"رمز عبور جدید را دوباره وارد نمایید.",minlength:"حداقل 6 کاراکتر وارد نمایید.",equalTo:"رمز عبور جدید را عیناً وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control"))},submitHandler:function(e){var r=$("#pass"),a=$("#newpass"),t=$("#renewpass");$.ajax({type:"POST",data:{action:"pass",pass:r.val(),newpass:a.val()},url:"/profile/changePasswordAjax",success:function(e){var o=JSON.parse(e);""!=o.error?("User.015"==o.ErrorCode&&(window.location="./logout"),Metronic.alert({container:".pass-result",place:"append",type:"danger",message:o.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),$("#pass").focus(),$("#pass").parent("div").removeClass("has-success").addClass("has-error"),$("#newpass").parent("div").removeClass("has-success").addClass("has-error"),$("#renewpass").parent("div").removeClass("has-success").addClass("has-error")):"true"==o.result?(r.val(""),a.val(""),t.val(""),r.focus(),$("#pass").parent("div").removeClass("has-success"),$("#newpass").parent("div").removeClass("has-success"),$("#renewpass").parent("div").removeClass("has-success"),Metronic.alert({container:".pass-result",place:"append",type:"success",message:o.message,close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"check"}),$("#alert_password").addClass("hide")):"logout"==e?window.location="./logout":alert("Problem with web service")}})}}),$("#password-form input").keypress(function(e){if(13==e.which)return $("#password-form").validate()&&$("#password-form").submit(),!1})},handleCompanyEdit=function(){$("#company_form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{code:{required:!0},title:{required:!0},tel:{digits:!0,number:!0},email:{email:!0},managerName:{required:!0},titleInReport:{required:!0},fax:{number:!0},mobile:{number:!0},economicNo:{number:!0},registerNo:{},web:{},activityDesc:{},description:{},addr:{}},messages:{code:{required:"کد شرکت را وارد نمایید."},title:{required:"عنوان شرکت را وارد نمایید"},tel:{digits:"لطفاً عدد وارد نمایید.",number:"مقدار معتبر وارد نمایید."},email:{email:"لطفاً یک ایمیل معتبر وارد نمایید."},managerName:{required:"نام مدیرعامل را وارد نمایید."},titleInReport:{required:"عنوان در گزارشات را وارد نمایید."},fax:{number:"مقدار معتبر وارد نمایید."},mobile:{number:"مقدار معتبر وارد نمایید."},economicNo:{number:"مقدار معتبر وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control"))},submitHandler:function(e){var r=new FormData(e);r.append("company","company"),$.ajax({url:"/company/companyAjax",type:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(e){console.log(e);var r=JSON.parse(e);""!=r.error?("User.015"==r.ErrorCode&&(window.location="./logout"),Metronic.alert({container:".msg_result",place:"append",type:"danger",message:r.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"})):"true"==r.result&&Metronic.alert({container:".msg_result",place:"append",type:"success",message:r.message,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"check"})}})}}),$("#profile_form input").keypress(function(e){if(13==e.which)return $("#profile_form").validate()&&$("#profile_form").submit(),!1})},handleAddVoucher=function(){$(".usr-submit").on("click",function(){var e=$(this).val();"note-submit"==e?$("#sanad_date").rules("remove","remote"):$("#sanad_date").rules("add",{remote:{url:siteUrl+"financialPeriod/checkDatePeriodOfVoucher",type:"post",data:{submited:function(){return e}}}})}),$("#voucher").validate({errorElement:"span",errorClass:"help-block col-lg-offset-4",focusInvalid:!0,rules:{sanad_date:{required:!0,dateISO:!0,remote:{url:siteUrl+"financialPeriod/checkDatePeriodOfVoucher",type:"post"}},manual_code:{required:!1,number:!0},sanad_code:{required:!1},sanad_type:{required:!0},atf:{required:!0},voucher_code:{required:function(){return"sanad"===$('input[name="atf"]:checked').val()}},description:{required:!1}},messages:{sanad_date:{required:"پر کردن فیلد تاریخ سند الزامی است.",dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",remote:"تاریخ سند باید در بازه دوره مالی انتخاب شده برای سیستم باشد."},manual_code:{number:"شماره دستی فقط می تواند عدد باشد."},sanad_code:{},sanad_type:{required:"پر کردن فیلد نوع سند الزامی است."},atf:{},voucher_code:{required:"شماره سند را انتخاب نمایید"},description:{}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){if(null==$("#tbody_details").find("tr").data("counter"))return Metronic.alert({container:"#vocher_alert",place:"append",type:"danger",message:"لطفا جهت ثبت سند سطرهاي سند را وارد کنيد",close:"1",reset:"1",focus:"1",closeInSeconds:"3",icon:"warning"}),!1;var r={},a=$("button[clicked=true]").val(),t=$("#id_voucher").val();0!=t&&(r.id=t),r.statusVoucherId="sanad-submit"==a?"2":"1",r.voucherDate=$("#sanad_date").val(),r.manualCode=$("#manual_code").val(),r.voucherTypeId=$("#voucherType_selection").attr("data-id-vouchertype"),r.description=$("#description").val().replace(/"/g,"'");var o=1,s={};$("#tbody_details").find("tr").each(function(){var e=$(this).data("counter"),r={};r.fullCode=$("#fullCode_"+e).val(),r.row=o,r.accountTopicKolId=$("#topic_kol_selection_"+e).attr("data-id-kol"),r.accountTopicMoeinId=$("#topic_moein_selection_"+e).attr("data-id-moein"),r.accountTopicTafsili1Id=$("#tafsiliInput1_"+e).attr("data-id-tafsili"),r.accountTopicTafsili2Id=$("#tafsiliInput2_"+e).attr("data-id-tafsili"),r.accountTopicTafsili3Id=$("#tafsiliInput3_"+e).attr("data-id-tafsili"),r.accountTopicTafsili4Id=$("#tafsiliInput4_"+e).attr("data-id-tafsili"),r.costCenterID=$("#takmili_"+e).attr("data-markaz"),r.amount=$("#takmili_"+e).attr("data-takmilinumber"),r.lineDate=$("#takmili_"+e).attr("data-takmiliDate"),r.bed=$("#bed"+e).val(),r.bes=$("#bes"+e).val(),r.description=$("#description_"+e).val().replace(/"/g,"'"),r.bes=r.bes.trim().replace(/,/g,""),r.bed=r.bed.trim().replace(/,/g,""),s[o]=r,o++});var n=[r,s];Metronic.blockUI({target:"body",boxed:!0,message:"در حال ثبت..."}),$.ajax({type:"POST",data:{addVoucher:"true",data:JSON.stringify(n)},url:"/voucher/saveAjax",success:function(e){var a=JSON.parse(e);""==a.error&&"true"==a.result?window.location="/voucher/add?id="+a.voucherid+"&succ=succ&voucherCode="+a.vouchercode+"&voucherDate="+r.voucherDate+"&manualCode="+r.manualCode+"&voucherCode2="+a.vouchercode2:Metronic.alert({container:"#res",place:"append",type:"danger",message:a.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}),Metronic.unblockUI("body")}})}}),$("#voucher input").keypress(function(e){if(13==e.which)return $("#voucher").validate()&&$("#voucher").submit(),!1})},handleReportKol=function(){$("#report").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{item_per_page:{required:!0,maxlength:2,min:1},fromdate:{required:!1,dateISO:!0},todate:{dateISO:!0,greaterThanDate:"#fromdate"},fromvoucher:{required:!1,number:!0},tovoucher:{required:!1,min:function(){var e=$("#fromvoucher").val();return null==e||""==e||parseInt($("#fromvoucher").val())},number:!0},from_voucherId:{number:!0},to_voucherId:{number:!0,min:function(){return y=$("#from_voucherId").val(),null==y||""==y||parseInt(y)}}},messages:{topic_selection:{required:"لطفاً سرفصل را انتخاب نمایید."},item_per_page:{required:"تعداد سطر در هر صفحه را وارد نمایید.",maxlength:"لطفاً یک عدد دو رقمی وارد نمایید.",min:"لطفا عدد بزرگتر از 1 وارد کنید"},fromdate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",greaterThanDate:'لطفاً تاریخی بزرگتر از فیلد "از تاریخ" وارد نمایید.'},fromvoucher:{number:"لطفاً عدد وارد نمایید."},tovoucher:{min:'لطفاً عددی بزرگتر از عدد "از شماره سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},from_voucherId:{number:"لطفاً عدد وارد نمایید."},to_voucherId:{min:'لطفاً عددی بزرگتر از عدد "از شماره ثابت سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){var r={};document.getElementById("merge").checked?r.merge="true":r.merge="false",document.getElementById("status_voucher").checked?r.status_voucher="3":r.status_voucher="3,2",document.getElementById("zerovalueinfirst").checked?r.zerovalueinfirst="true":r.zerovalueinfirst="false",document.getElementById("voucher_desc").checked?r.voucher_desc="true":r.voucher_desc="false",document.getElementById("voucherline_desc").checked?r.voucherline_desc="true":r.voucherline_desc="false",document.getElementById("batchnumber").checked?r.batchnumber="true":r.batchnumber="false",document.getElementById("manual_code").checked?r.manual_code="true":r.manual_code="false",document.getElementById("noseparate").checked?r.noseparate="true":r.noseparate="false",document.getElementById("orderby_bed_bes").checked?r.orderby_bed_bes="true":r.orderby_bed_bes="false",document.getElementById("show_company_title").checked?r.show_company_title="true":r.show_company_title="false",document.getElementById("show_company_logo").checked?r.show_company_logo="true":r.show_company_logo="false";var a=new Array;$('input[name="type[]"]:checked').each(function(){a.push(this.value)});var t=new Array,o=new Array,s=new Array;$('input[name="topic[]"]').each(function(){t.push(this.value)}),$('input[name="topic[]"]').each(function(){o.push($(this).attr("data-code"))}),$('input[name="topic[]"]').each(function(){s.push($(this).attr("data-title"))}),$("#allTopicId").attr("data-id",t),$("#allTopicCode").attr("data-code",o),$("#allTopicTitle").val(s),a=new Array,$('input[name="vouchertype[]"]:checked').each(function(){a.push(this.value)}),r.voucherType=a.toString(),r.allTopicId=$("#allTopicId").attr("data-id"),r.allTopicCode=$("#allTopicCode").attr("data-code"),r.allTopicTitle=$("#allTopicTitle").val(),r.topic_selection=$("#topic_selection").val(),r.topic_selection_id=$("#topic_selection").attr("data-id"),r.topic_selection_code=$("#topic_selection").attr("data-code"),r.item_per_page=$("#item_per_page").val(),r.fromdate=$("#fromdate").val(),r.todate=$("#todate").val(),r.fromvoucher=$("#fromvoucher").val(),r.tovoucher=$("#tovoucher").val(),r.from_voucherId=$("#from_voucherId").val(),r.to_voucherId=$("#to_voucherId").val(),Metronic.blockUI({target:"body",boxed:!0,message:"در حال بارگذاری..."}),$.ajax({type:"POST",data:{query:JSON.stringify(r)},url:"/kol/queryAjax",success:function(e){window.location="/kol/report"}})}}),$("#report input").keypress(function(e){if(13==e.which)return $("#report").validate()&&$("#report").submit(),!1})},handleReportMoien=function(){$("#report_moien").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{item_per_page:{required:!0,maxlength:2,min:1},fromdate:{required:!1,dateISO:!0},todate:{dateISO:!0,greaterThanDate:"#fromdate"},fromvoucher:{number:!0},tovoucher:{min:function(){var e=$("#fromvoucher").val();return null==e||""==e||parseInt($("#fromvoucher").val())},number:!0},from_voucherId:{number:!0},to_voucherId:{number:!0,min:function(){return y=$("#from_voucherId").val(),null==y||""==y||parseInt(y)}}},messages:{topic_selection:{required:"لطفاً سرفصل را انتخاب نمایید."},item_per_page:{required:"تعداد سطر در هر صفحه را وارد نمایید.",maxlength:"لطفاً یک عدد دو رقمی وارد نمایید.",min:"لطفا عدد بزرگتر از 1 وارد کنید"},fromdate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",greaterThanDate:'لطفاً تاریخی بزرگتر از فیلد "از تاریخ" وارد نمایید.'},fromvoucher:{number:"لطفاً عدد وارد نمایید."},tovoucher:{min:'لطفاً عددی بزرگتر از عدد "از شماره سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},from_voucherId:{number:"لطفاً عدد وارد نمایید."},to_voucherId:{min:'لطفاً عددی بزرگتر از عدد "از شماره ثابت سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){var r={};document.getElementById("zerovalueinfirst").checked?r.zerovalueinfirst="true":r.zerovalueinfirst="false",document.getElementById("voucher_desc").checked?r.voucher_desc="true":r.voucher_desc="false",document.getElementById("voucherline_desc").checked?r.voucherline_desc="true":r.voucherline_desc="false",document.getElementById("batchnumber").checked?r.batchnumber="true":r.batchnumber="false",document.getElementById("ManualCode").checked?r.ManualCode="true":r.ManualCode="false",document.getElementById("orderby_bed_bes").checked?r.orderby_bed_bes="true":r.orderby_bed_bes="false",document.getElementById("show_company_title").checked?r.show_company_title="true":r.show_company_title="false",document.getElementById("show_company_logo").checked?r.show_company_logo="true":r.show_company_logo="false",document.getElementById("status_voucher").checked?r.status_voucher="3":r.status_voucher="3,2";var a=new Array,t=new Array,o=new Array;$('input[name="topic[]"]').each(function(){a.push(this.value)}),$('input[name="topic[]"]').each(function(){t.push($(this).attr("data-code"))}),$('input[name="topic[]"]').each(function(){o.push($(this).attr("data-title"))}),$("#allTopicId").attr("data-id",a),$("#allTopicCode").attr("data-code",t),$("#allTopicTitle").val(o);var s=new Array;$('input[name="vouchertype[]"]:checked').each(function(){s.push(this.value)}),r.voucherType=s.toString(),r.topic_selection=$("#topic_selection").val(),r.topic_selection_id=$("#topic_selection").attr("data-id"),r.topic_selection_code=$("#topic_selection").attr("data-code"),r.allTopicId=$("#allTopicId").attr("data-id"),r.allTopicCode=$("#allTopicCode").attr("data-code"),r.allTopicTitle=$("#allTopicTitle").val(),r.item_per_page=$("#item_per_page").val(),r.fromdate=$("#fromdate").val(),r.todate=$("#todate").val(),r.fromvoucher=$("#fromvoucher").val(),r.tovoucher=$("#tovoucher").val(),r.from_voucherId=$("#from_voucherId").val(),r.to_voucherId=$("#to_voucherId").val(),Metronic.blockUI({target:"body",boxed:!0,message:"در حال بارگذاری..."}),$.ajax({type:"POST",data:{query_m:JSON.stringify(r)},url:"/moein/queryAjax",success:function(e){window.location="/moein/report"},error:function(){}})}}),$("#report_moien input").keypress(function(e){if(13==e.which)return $("#report_moien").validate()&&$("#report_moien").submit(),!1})},handleReportvoucher=function(){$("#report1").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{fromdate:{dateISO:!0},todate:{dateISO:!0,greaterThanDate:"#fromdate"},fromvoucher:{number:!0},tovoucher:{min:function(){var e=$("#fromvoucher").val();return null==e||""==e||parseInt($("#fromvoucher").val())},number:!0},from_voucherId:{number:!0},to_voucherId:{number:!0,min:function(){return y=$("#from_voucherId").val(),null==y||""==y||parseInt(y)}},fromRef:{number:!0},toRef:{min:function(){return y=$("#fromRef").val(),null==y||""==y||parseInt($("#fromRef").val())},number:!0},fromPrice:{pattern:!0},toPrice:{greaterThanPrice:"#fromPrice",pattern:!0},item_per_page:{number:!0,range:[1,10]}},messages:{fromdate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",greaterThanDate:'لطفاً تاریخی بزرگتر از فیلد "از تاریخ" وارد نمایید.'},fromvoucher:{number:"لطفاً عدد وارد نمایید."},tovoucher:{min:'لطفاً عددی بزرگتر از عدد "از شماره سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},from_voucherId:{number:"لطفاً عدد وارد نمایید."},to_voucherId:{min:'لطفاً عددی بزرگتر از عدد "از شماره ثابت سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},fromRef:{number:"لطفاً عدد وارد نمایید."},toRef:{min:'لطفاً عددی بزرگتر از عدد "از شماره عطف" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},fromPrice:{number:"لطفاً عدد وارد نمایید."},toPrice:{greaterThanPrice:'لطفاً عددی بزرگتر از عدد "از مبلغ" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},item_per_page:{number:"مقدار معتبر وارد کنید",range:"مقدار عددی بین 1 تا 10 وارد کنید"}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},succetestss:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},invalidHandler:function(e,r){r.errorList.length&&$('#tabs a[href="#'+jQuery(r.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")},errorPlacement:function(e,r){e.insertAfter(r.closest(".error_place"))},showErrors:function(){this.defaultShowErrors(),$("#small").modal("hide")}}),$("#report1 input").keypress(function(e){if(13==e.which)return $("#report1").validate()&&$("#report1").submit(),!1})},handleAddTime=function(){$("#add_time").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{fromdate:{required:!0,dateISO:!0},todate:{required:!0,dateISO:!0,greaterThanDate:"#fromdate"},percentFrom_number:{required:!0,digits:!0,min:0},percentTo_number:{required:!0,digits:!0,greaterThan:"#percentFrom_number",min:0},time:{required:!0,timeISO:!0,timeISO2:!0},week_selection:{required:!0},company_selection:{required:!0}},messages:{fromdate:{required:"لطفاً یک تاریخ معتبر وارد نمایید.",dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",required:"لطفاً یک تاریخ معتبر وارد نمایید.",greaterThanDate:'لطفاً تاریخی بزرگتر از فیلد "از تاریخ" وارد نمایید.'},percentFrom_number:{required:"لطفا یک عدد وارد نمایید.",digits:"لطفا یک عدد وارد نمایید.",min:"لطفا عددی بزرگ تر یا مساوی 0 وارد نمایید. "},percentTo_number:{required:"لطفا یک درصد وارد نمایید.",digits:"لطفا یک عدد وارد نمایید.",greaterThan:'لطفاً عددی بزرگتر از فیلد "از تعداد" وارد نمایید.',min:"لطفا عددی بزرگ تر یا مساوی 0 وارد نمایید. "},time:{timeISO2:"تنها مجاز به وارد کردن دقيقه صفر يا سي مي باشيد",timeISO:"لطفاً یک زمان معتبر وارد نمایید.",required:"لطفاً یک زمان معتبر وارد نمایید."},week_selection:{required:"حداقل یک روز را انتخاب نمایید."},company_selection:{required:"حداقل یک شرکت را انتخاب نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-9"))},submitHandler:function(e){var r=new FormData(e);r.append("workType",$("#type").attr("data-id")),r.append("week_selection_id",$("#week_selection").attr("data-id")),r.append("company_selection_id",$("#company_selection").attr("data-id")),r.append("company_selection_code",$("#company_selection").attr("data-code")),r.append("addTime","addTime"),$.ajax({url:"/time/save",type:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(e){var r=JSON.parse(e);"true"==r.result?window.location="/time?succ=succ":Metronic.alert({container:"#res",place:"append",type:"danger",message:r.message,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"})}})}}),$("#add_time input").keypress(function(e){if(13==e.which)return $("#add_time").validate()&&$("#add_time").submit(),!1})},handleFasli=function(){$(".report2").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,ignore:"",rules:{year:{number:!0,range:[1300,1800]},registerNo:{required:!0,number:!0},article_desc:{required:!0},todate:{greaterThanDate:"#fromdate"},tovoucher:{min:function(){return y=$("#fromvoucher").val(),null==y||""==y||parseInt($("#fromvoucher").val())}},limit_price:{},to_price:{greaterThanPrice:"#from_price"},from_price:{},managerName:{required:!0},party_select:{},activityDesc:{required:!0},customer_name:{required:!0},ostan:{required:!0},fax:{required:!0,number:!0},city:{required:!0},country:{required:!0},pre_number_phone:{required:!0,number:!0},tel:{required:!0,number:!0},mobile:{required:!0,number:!0},iran_code:{required:!0,number:!0},city_darai:{required:!0},EdareKolCode:{required:!0},zip_code:{required:!0,number:!0},route_access_file:{required:!0},addr:{required:!0},username:{},economicNo:{required:!0,number:!0}},messages:{year:{number:"مقدار سال را درست وارد کنید",range:"محدوده سال را درست وارد کنید"},registerNo:{required:"درج مقدار برای شماره ثبت الزامی میباشد",number:"مقدار معتبر وارد کنید "},party_select:{},article_desc:{required:" درج مقدار براي شرح نوع کالا الزامي میباشد "},todate:{greaterThanDate:"مقدار فیلد سند از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},todate_ret:{greaterThanDate:"مقدار فیلد سند برگشتی از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},tovoucher:{min:"مقدار فیلد سند از شماره  نباید از فیلد تا شماره بزرگتر باشد"},tovoucher_ret:{min:"مقدار فیلد سند برگشتی از شماره  نباید از فیلد تا شماره بزرگتر باشد"},to_price:{greaterThanPrice:"مقدار فیلد از مبلغ نباید از فیلد تا مبلغ بزرگتر باشد."},managerName:{required:"درج مقدار برای مودی اصلی/مدیر عامل اجباری میباشد"},activityDesc:{required:"درج مقدار برای نوع فعالیت الزامی میباشد"},customer_name:{required:"درج مقدار برای نوع فروشنده/خریدار الزامی میباشد"},ostan:{required:"درج مقدار برای  استان الزامی میباشد"},fax:{required:"درج مقدار برای فکس الزامی میباشد",number:"مقدار معتبر وارد کنید "},city:{required:"درج مقدار برای شهر الزامی میباشد"},country:{required:"درج مقدار برای کشور الزامی میباشد"},pre_number_phone:{required:"درج مقدار برای پیش شمار الزامی میباشد",number:"مقدار معتبر وارد کنید "},tel:{required:"درج مقدار برای تلفن الزامی میباشد",number:"مقدار معتبر وارد کنید "},mobile:{required:"شماره تلفن را وارد نمایید. ",number:"مقدار معتبر وارد کنید "},iran_code:{required:"درج مقدار برای تلفن همراه الزامی میباشد",number:"مقدار معتبر وارد کنید "},city_darai:{required:"درج مقدار برای استان/شهر الزامی میباشد"},EdareKolCode:{required:"درج مقدار برای اداره امور مالیاتی الزامی میباشد"},zip_code:{required:"درج مقدار برای کدپستی الزامی میباشد",number:"مقدار معتبر وارد کنید "},route_access_file:{required:"فایل دیسکت دارایی را انتخاب نمایید"},addr:{required:"درج مقدار برای آدرس الزامی میباشد"},username:{},economicNo:{required:"درج مقدار برای کد اقتصادی الزامی میباشد",number:"مقدار معتبر وارد کنید "}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},succetestss:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},invalidHandler:function(e,r){r.errorList.length&&$('#tabs a[href="#'+jQuery(r.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")},errorPlacement:function(e,r){e.insertAfter(r.closest(".error_place"))},showErrors:function(){this.defaultShowErrors(),$("#small").modal("hide")}})},handleFasliTransfer=function(){$("#submittransfer").click(function(){$(".report2").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,ignore:"",rules:{year:{number:!0,range:[1300,1800]},registerNo:{required:!0,number:!0},article_desc:{required:!0},todate:{greaterThanDate:"#fromdate"},todate_ret:{greaterThanDate:"#fromdate_ret"},tovoucher:{min:function(){return y=$("#fromvoucher").val(),null==y||""==y||parseInt($("#fromvoucher").val())}},tovoucher_ret:{min:function(){return x=$("#fromvoucher_ret").val(),null==x||""==x||parseInt($("#fromvoucher_ret").val())}},limit_price:{},to_price:{pattern:!0,min:function(){if(x=$("#from_price").val(),null!=x&&""!=x){var e=x.replace(/,/g,"");return parseInt(e)}return!0}},from_price:{pattern:!0},managerName:{required:!0},"party_name[]":{},activityDesc:{required:!0},customer_name:{required:!0},ostan:{required:!0},fax:{required:!0,number:!0},city:{required:!0},country:{required:!0},pre_number_phone:{required:!0,number:!0},tel:{required:!0,number:!0},mobile:{required:!0,number:!0},iran_code:{required:!0,number:!0},zip_code:{required:!0,number:!0},addr:{required:!0},username:{},economic_code:{required:!0,number:!0}},messages:{year:{number:"مقدار سال را درست وارد کنید",range:"محدوده سال را درست وارد کنید"},registerNo:{required:"درج مقدار برای شماره ثبت الزامی میباشد",number:"مقدار معتبر وارد کنید "},"party_name[]":{},article_desc:{required:" درج مقدار براي شرح نوع کالا الزامي میباشد "},todate:{greaterThanDate:"مقدار فیلد سند از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},todate_ret:{greaterThanDate:"مقدار فیلد سند برگشتی از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},tovoucher:{min:"مقدار فیلد سند از شماره  نباید از فیلد تا شماره بزرگتر باشد"},tovoucher_ret:{min:"مقدار فیلد سند برگشتی از شماره  نباید از فیلد تا شماره بزرگتر باشد"},to_price:{min:"مقدار فیلد از مبلغ نباید از فیلد تا مبلغ بزرگتر باشد."},managerName:{required:"درج مقدار برای مودی اصلی/مدیر عامل اجباری میباشد"},activityDesc:{required:"درج مقدار برای نوع فعالیت الزامی میباشد"},customer_name:{required:"درج مقدار برای نوع فروشنده/خریدار الزامی میباشد"},ostan:{required:"درج مقدار برای  استان الزامی میباشد"},fax:{required:"درج مقدار برای فکس الزامی میباشد",number:"مقدار معتبر وارد کنید "},city:{required:"درج مقدار برای شهر الزامی میباشد"},country:{required:"درج مقدار برای کشور الزامی میباشد"},pre_number_phone:{required:"درج مقدار برای پیش شمار الزامی میباشد",number:"مقدار معتبر وارد کنید "},tel:{required:"درج مقدار برای تلفن الزامی میباشد",number:"مقدار معتبر وارد کنید "},mobile:{required:"شماره تلفن را وارد نمایید. ",number:"مقدار معتبر وارد کنید "},iran_code:{required:"درج مقدار برای تلفن همراه الزامی میباشد",number:"مقدار معتبر وارد کنید "},zip_code:{required:"درج مقدار برای کدپستی الزامی میباشد",number:"مقدار معتبر وارد کنید "},addr:{required:"درج مقدار برای آدرس الزامی میباشد"},username:{},economicNo:{required:"درج مقدار برای کد اقتصادی الزامی میباشد",number:"مقدار معتبر وارد کنید "}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},succetestss:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},invalidHandler:function(e,r){r.errorList.length&&$('#tabs a[href="#'+jQuery(r.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")},errorPlacement:function(e,r){e.insertAfter(r.closest(".error_place"))},showErrors:function(){this.defaultShowErrors(),$("#small").modal("hide")}})})},handleFasliSearch=function(){$("#submitsearch").click(function(){$("div").closest(".form-group").removeClass("has-error"),$(".report2").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,ignore:"",rules:{year:{number:!0,range:[1300,1800]},todate:{greaterThanDate:"#fromdate"},todate_ret:{greaterThanDate:"#fromdate_ret"},tovoucher:{min:function(){return y=$("#fromvoucher").val(),null==y||""==y||parseInt($("#fromvoucher").val())}},tovoucher_ret:{min:function(){return x=$("#fromvoucher_ret").val(),null==x||""==x||parseInt($("#fromvoucher_ret").val())}},limit_price:{pattern:!0},to_price:{pattern:!0,min:function(){if(x=$("#from_price").val(),null!=x&&""!=x){var e=x.replace(/,/g,"");return parseInt(e)}return!0}},from_price:{pattern:!0},"party_name[]":{},fax:{number:!0},pre_number_phone:{number:!0},customer_phone:{number:!0},mobile:{number:!0},iran_code:{number:!0},zip_code:{number:!0},economicNO:{number:!0}},messages:{year:{number:"مقدار سال را درست وارد کنید",range:"محدوده سال را درست وارد کنید"},register_number:{number:"مقدار معتبر وارد کنید "},"party_name[]":{},todate:{greaterThanDate:"مقدار فیلد سند از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},todate_ret:{greaterThanDate:"مقدار فیلد سند برگشتی از تاریخ نباید از فیلد تا تاریخ بزرگتر باشد"},tovoucher:{min:"مقدار فیلد سند از شماره  نباید از فیلد تا شماره بزرگتر باشد"},tovoucher_ret:{min:"مقدار فیلد سند برگشتی از شماره  نباید از فیلد تا شماره بزرگتر باشد"},to_price:{min:"مقدار فیلد از مبلغ نباید از فیلد تا مبلغ بزرگتر باشد."},fax:{number:"مقدار معتبر وارد کنید "},pre_number_phone:{number:"مقدار معتبر وارد کنید "},customer_phone:{number:"مقدار معتبر وارد کنید "},mobile:{number:"مقدار معتبر وارد کنید "},iran_code:{number:"مقدار معتبر وارد کنید "},zip_code:{number:"مقدار معتبر وارد کنید "},economicNo:{number:"مقدار معتبر وارد کنید "}},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},succetestss:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},invalidHandler:function(e,r){r.errorList.length&&$('#tabs a[href="#'+jQuery(r.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")},errorPlacement:function(e,r){e.insertAfter(r.closest(".error_place"))},showErrors:function(){this.defaultShowErrors(),$("#small").modal("hide")}})})},handleReportTafsili=function(){$("#report").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{topic_selection:{required:!0},item_per_page:{required:!0,maxlength:2},fromdate:{required:!1,dateISO:!0},todate:{required:!1,dateISO:!0},fromvoucher:{required:!1,number:!0},tovoucher:{required:!1,min:function(){return y=$("#fromvoucher").val(),null==y||""==y||parseInt($("#fromvoucher").val())},number:!0},fromVoucherId:{number:!0},toVoucherId:{number:!0,min:function(){var e=$("#fromVoucherId").val();return null==e||""==e||parseInt(e)}}},messages:{topic_selection:{required:"لطفاً سرفصل را انتخاب نمایید."},item_per_page:{required:"تعداد سطر در هر صفحه را وارد نمایید.",maxlength:"لطفاً یک عدد دو رقمی وارد نمایید."},fromdate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},fromvoucher:{number:"لطفاً عدد وارد نمایید."},tovoucher:{min:'لطفاً عددی بزرگتر از عدد "از شماره سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."},fromVoucherId:{number:"لطفاً عدد وارد نمایید."},toVoucherId:{min:'لطفاً عددی بزرگتر از عدد "از شماره ثابت سند" وارد نمایید.',number:"لطفاً عدد وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-8"))},submitHandler:function(e){var r={};document.getElementById("descriptionAllDoc").checked?r.descriptionAllDoc="true":r.descriptionAllDoc="false",document.getElementById("descriptionOneDoc").checked?r.descriptionOneDoc="true":r.descriptionOneDoc="false",document.getElementById("descriptionEachDoc").checked?r.descriptionEachDoc="true":r.descriptionEachDoc="false",document.getElementById("showValueDate").checked?r.showValueDate="true":r.showValueDate="false",document.getElementById("showVocherId").checked?r.showVocherId="1":r.showVocherId="0",document.getElementById("StatusVoucherID").checked?r.StatusVoucherID="1":r.StatusVoucherID="0",document.getElementById("showMoeinAcount").checked?r.showMoeinAcount="1":r.showMoeinAcount="0";var a="";document.getElementById("sateh1_event").checked?(a="1",r.sateh1_event="true"):(a="0",r.sateh1_event="false");var t="";document.getElementById("sateh2_event").checked?(t="1",r.sateh2_event="true"):(t="0",r.sateh2_event="false");var o="";document.getElementById("sateh3_event").checked?(o="1",r.sateh3_event="true"):(o="0",r.sateh3_event="false");var s="";switch(document.getElementById("sateh4_event").checked?(s="1",r.sateh4_event="true"):(s="0",r.sateh4_event="false"),$("#sarfasl_event_1").val()){case"1":r.azaz_event_1="1";break;case"2":r.shenavar_event_1="2";break;case"3":r.yekta_event_1="3"}switch($("#sarfasl_event_2").val()){case"1":r.azaz_event_2="1";break;case"2":r.shenavar_event_2="2";break;case"3":r.yekta_event_2="3"}switch($("#sarfasl_event_3").val()){case"1":r.azaz_event_3="1";break;case"2":r.shenavar_event_3="2";break;case"3":r.yekta_event_3="3"}switch($("#sarfasl_event_4").val()){case"1":r.azaz_event_4="1";break;case"2":r.shenavar_event_4="2";break;case"3":r.yekta_event_4="3"}var n=new Array(a,t,o,s);switch(r.choose_tafsili_number=n.toString(),$("#typeTafsiliOne").val()){case"1":r.azaz_one="1";break;case"2":r.shenavar_one="2";break;case"3":r.yekta_one="3"}var i="";document.getElementById("sateh1_one").checked?(i="1",r.sateh1_one="true"):(i="0",r.sateh1_one="false");var c="";document.getElementById("sateh2_one").checked?(c="1",r.sateh2_one="true"):(c="0",r.sateh2_one="false");var l="";document.getElementById("sateh3_one").checked?(l="1",r.sateh3_one="true"):(l="0",r.sateh3_one="false");var u="";document.getElementById("sateh4_one").checked?(u="1",r.sateh4_one="true"):(u="0",r.sateh4_one="false");var d=new Array(i,c,l,u);r.way_choose_tafsili=d.toString(),r.fromdate=$("#fromdate").val(),r.todate=$("#todate").val(),r.fromDocumentNumber=$("#fromDocumentNumber").val(),r.toDocumentNumber=$("#toDocumentNumber").val(),r.fromVoucherId=$("#fromVoucherId").val(),r.toVoucherId=$("#toVoucherId").val();var m=$("input[name=entity]:checked").val();if("0"==m){if(!($("#sateh1_one").is(":checked")||$("#sateh2_one").is(":checked")||$("#sateh3_one").is(":checked")||$("#sateh4_one").is(":checked")))return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا یکی از سطوح تفصیلی را انتخاب نمایید",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;r.topic_selection_hide=$("#topic_selection_hide").val(),r.topic_selection_code=$("#topic_selection").attr("data-code"),r.topic_show_selection_hide=$("#topic_show_selection_hide").val(),r.topic_selection=$("#topic_selection").val(),r.topic_show_selection=$("#topic_show_selection").val(),r.entity=m}else if("1"==m){if(!($("#sateh1_event").is(":checked")||$("#sateh2_event").is(":checked")||$("#sateh3_event").is(":checked")||$("#sateh4_event").is(":checked")))return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا یکی از سطوح تفصیلی را انتخاب نمایید",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;if(""==$("#topic_tafsili_event1_hide").val()&&""==$("#topic_tafsili_event2_hide").val()&&""==$("#topic_tafsili_event3_hide").val()&&""==$("#topic_tafsili_event4_hide").val())return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا سرفصل های تفصیلی را انتخاب نمایید ",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;if($("#sateh1_event").is(":checked")&&""==$("#topic_tafsili_event1_hide").val())return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا سرفصل های تفصیلی سطح1 را انتخاب نمایید ",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;if($("#sateh2_event").is(":checked")&&""==$("#topic_tafsili_event2_hide").val())return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا سرفصل های تفصیلی سطح2 را انتخاب نمایید ",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;if($("#sateh3_event").is(":checked")&&""==$("#topic_tafsili_event3_hide").val())return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا سرفصل های تفصیلی سطح3 را انتخاب نمایید ",icon:"error",focus:!0,reset:!0,closeInSeconds:4}),!1;if($("#sateh4_event").is(":checked")&&""==$("#topic_tafsili_event4_hide").val())return Metronic.alert({container:"#amel_alert",type:"danger",message:"لطفا سرفصل های تفصیلی سطح4 را انتخاب نمایید ",icon:"error",focus:!0,reset:!0,closeInSeconds:3}),!1;r.topic_tafsili_event1=$("#topic_tafsili_event1").val(),r.topic_tafsili_event2=$("#topic_tafsili_event2").val(),r.topic_tafsili_event3=$("#topic_tafsili_event3").val(),r.topic_tafsili_event4=$("#topic_tafsili_event4").val(),r.topic_tafsili_code1=$("#topic_tafsili_event1").attr("data-code"),r.topic_tafsili_code2=$("#topic_tafsili_event2").attr("data-code"),r.topic_tafsili_code3=$("#topic_tafsili_event3").attr("data-code"),r.topic_tafsili_code4=$("#topic_tafsili_event4").attr("data-code"),r.topic_tafsili_event1_hide=$("#topic_tafsili_event1_hide").val(),r.topic_tafsili_event2_hide=$("#topic_tafsili_event2_hide").val(),r.topic_tafsili_event3_hide=$("#topic_tafsili_event3_hide").val(),r.topic_tafsili_event4_hide=$("#topic_tafsili_event4_hide").val(),r.topic_show_tafsili_event1=$("#topic_show_tafsili_event1").val(),r.topic_show_tafsili_event2=$("#topic_show_tafsili_event2").val(),r.topic_show_tafsili_event3=$("#topic_show_tafsili_event3").val(),r.topic_show_tafsili_event4=$("#topic_show_tafsili_event4").val(),r.topic_show_tafsili_event1_hide=$("#topic_show_tafsili_event1_hide").val(),r.topic_show_tafsili_event2_hide=$("#topic_show_tafsili_event2_hide").val(),r.topic_show_tafsili_event3_hide=$("#topic_show_tafsili_event3_hide").val(),r.topic_show_tafsili_event4_hide=$("#topic_show_tafsili_event4_hide").val(),r.entity=m}document.getElementById("show_company_title").checked?r.show_company_title="true":r.show_company_title="false",document.getElementById("show_company_logo").checked?r.show_company_logo="true":r.show_company_logo="false",r.item_per_page=$("#item_per_page").val(),Metronic.blockUI({target:"body",boxed:!0,message:"در حال بارگذاری..."}),$.ajax({type:"POST",data:{query_tafsili:JSON.stringify(r)},url:"/tafsili/queryAjax",success:function(e){window.location="/tafsili/report"}})}}),$("#report input").keypress(function(e){if(13==e.which)return $("#report").validate()&&$("#report").submit(),!1})},handleBank=function(){$("#bank_form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{bankId:{required:!0,min:1},BranchTitle:{required:!0},BranchCode:{required:!0},accountNo:{required:!0},cardNo:{required:!1,minlength:16},isDefault2:{required:!0}},messages:{bankId:{required:"یک بانک را انتخاب نمایید.",min:"یک بانک را انتخاب نمایید."},BranchTitle:{required:"شعبه بانک را وارد نمایید."},BranchCode:{required:"کد شعبه بانک را وارد نمایید."},accountNo:{required:"شماره حساب خود را وارد نمایید."},cardNo:{minlength:"لطفاً یک شماره کارت معتبر وراد نمایید"},isDefault2:{required:"حتما یکی از حساب های شما باید برای مراودات پیشخوان انتخاب شود."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error"),"isDefault"==e.id.substr(0,9)&&$("#alert_bank_checkbox").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error"),"isDefault"==e.id.substr(0,9)&&$("#alert_bank_checkbox").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control")),"isDefault"==r[0].id.substr(0,9)&&e.insertAfter($("#alert_bank_checkbox"))},submitHandler:function(e){var r={},a=$("#cardNo").val().length;if(""!=a&&a<16)return!1;r.id=$("#id").val(),r.nikName=$("#bankNick").val(),r.bankId=$("#bankId").val(),r.BranchTitle=$("#BranchTitle").val(),r.BranchCode=$("#BranchCode").val(),r.trsBankBranchId=$("#trsBankBranchId").val(),r.accountKind=$("#accountKind").val(),r.accountNo=$("#accountNo").val(),r.cardNo=$("#cardNo").val(),r.amount=$("#amount").val();var t=$("#old_id").val(),o=JSON.parse($("#unique").val()),s=r.bankId+"-"+r.BranchTitle+"-"+r.BranchCode+"-"+r.accountNo;if($.inArray(s,o)>=0)return Metronic.alert({container:"#bank_alert",place:"append",type:"danger",message:"به ازای هر شعبه بانک فقط یک شماره حساب میتوان تعریف کرد.",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;$.ajax({type:"POST",data:{bank:JSON.stringify(r),old_id:t},url:"/bank/saveAjax",success:function(e){console.log(e);var a=JSON.parse(e);if(""!=a.error)"User.015"==a.ErrorCode&&(window.location="./logout"),Metronic.alert({container:"#bank_alert",place:"append",type:"danger",message:a.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"});else{var t="";t="0"==r.id?"شماره حساب جدید ثبت گردید.":"شماره حساب اصلاح گردید.",window.location="/bank?status=success&msg="+t+"&icon=check"}}}),Metronic.blockUI({target:"body",boxed:!0,message:"در حال بارگذاری..."}),$("#loader-icon").bind("ajaxStart",function(){$(this).show()}).bind("ajaxStop",function(){$(this).hide()})}}),$("#bank_form input").keypress(function(e){if(13==e.which)return $("#bank_form").validate()&&$("#bank_form").submit(),!1})},handleFilterLog=function(){$("#eventForm").validate({errorElement:"span",errorClass:"help-block col-lg-offset-6",focusInvalid:!0,rules:{fromdate:{required:!1,dateISO:!0},todate:{dateISO:!0,greaterThanDate:"#fromdate"}},messages:{fromdate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."},todate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید.",greaterThanDate:'لطفاً تاریخی بزرگتر از فیلد "از تاریخ" وارد نمایید.'}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".col-md-6"))},submitHandler:function(e){var r={};r.fromdate=$("#fromdate").val(),r.todate=$("#todate").val();var a=new Array;$('input[name="filter[]"]:checked').each(function(){a.push(this.value)}),a.length>0?r.filter_codes=a.toString():r.filter_codes="";var t=new Array;$('input[name="user_filter[]"]:checked').each(function(){t.push(this.value)}),t.length>0?r.user_filter_codes=t.toString():r.user_filter_codes="",$("#filter_modal").modal("hide"),Metronic.blockUI({target:"body",boxed:!0,message:"در حال بارگذاری..."}),$.ajax({type:"POST",data:{log_query:JSON.stringify(r)},url:"/log/logQueryAjax",success:function(e){var r=$("#log");r.dataTable(),r.api().ajax.reload()}}),Metronic.unblockUI("body")}}),$("#eventForm input").keypress(function(e){if(13==e.which)return $("#report").validate()&&$("#report").submit(),!1})},handleSetting=function(){$("#setting-form").validate({errorElement:"span",errorClass:"help-block col-lg-offset-3",focusInvalid:!0,rules:{tax_percent:{required:!0,min:1,max:99}},messages:{tax_percent:{required:"پر کردن این فیلد الزامیست",min:"عددی بین 1 تا 100 انتخاب نمایید",max:"عددی بین 1 تا 100 انتخاب نمایید"}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){},submitHandler:function(e){var r=new FormData(e);r.append("setting","setting"),$.ajax({url:"/setting/save",type:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(e){"true"==e?Metronic.alert({container:"#res",place:"append",type:"success",message:"با موفقیت ذخیره گردید",close:"1",reset:"1",focus:"1",closeInSeconds:"3",icon:"checked"}):Metronic.alert({container:"#res",place:"append",type:"danger",message:"خطا در ذخیره اطلاعات ",close:"1",reset:"1",focus:"1",closeInSeconds:"3",icon:"warning"})}})}}),$("#setting-form input").keypress(function(e){if(13==e.which)return $("#setting-form").validate()&&$("#setting-form").submit(),!1})},handlePersons=function(){$("#form1").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{code:{required:!0},name:{required:!0},family:{required:!0},name2:{required:!0},companyName:{required:!0},mobile:{minlength:11,number:!0},tel:{minlength:3,number:!0},birthdate:{dateISO:!0},marriageDate:{dateISO:!0},email:{email:!0},meliCode:{number:!0},economicCode:{number:!0},shenase:{number:!0}},messages:{code:{required:"لطفا این فیلد را پر نمایید"},name:{required:"لطفا این فیلد را پر نمایید"},family:{required:"لطفا این فیلد را پر نمایید"},name2:{required:"لطفا این فیلد را پر نمایید"},companyName:{required:"لطفا این فیلد را پر نمایید"},mobile:{minlength:"لطفا شماره تلفن صحیح وارد نمایید",number:"لطفا شماره تلفن صحیح وارد نمایید"},tel:{minlength:"لطفا شماره تلفن صحیح وارد نمایید",number:"لطفا شماره تلفن صحیح وارد نمایید"},birthdate:{dateISO:"لطفا تاریخ صحیح وارد نمایید"},marriageDate:{dateISO:"لطفا تاریخ صحیح وارد نمایید"},email:{email:"لطفا ایمیل صحیح وارد نمایید"},meliCode:{number:"لطفا عدد صحیح وارد نمایید"},economicCode:{number:"لطفا عدد صحیح وارد نمایید"},shenase:{number:"لطفا عدد صحیح وارد نمایید"}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control:not(.isDate)")),e.insertAfter(r.closest(".isDate").parent())},submitHandler:function(e){if(!$("input[name=checkbox]:checked").val()&&!$("input[name=checkbox2]:checked").val()&&!$("input[name=checkbox3]:checked").val())return Metronic.alert({container:"#alert",place:"append",type:"danger",message:"انتخاب حداقل يکی از گزينه های نوع رابطه الزامی است.",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;var r=new FormData(e);Metronic.blockUI({target:"body",boxed:!0,message:"در حال ثبت..."}),$.ajax({type:"POST",data:r,processData:!1,contentType:!1,cache:!1,url:"/persons/saveAjax",success:function(e){if("noCode"==e)return Metronic.alert({container:"#alert",place:"append",type:"danger",message:"کد اشخاص نباید تکراری باشد",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),Metronic.unblockUI("body"),!1;"noName"==e&&(Metronic.alert({container:"#alert",place:"append",type:"danger",message:"مقادير وارد شده براي نام و نام خانوادگي تکراري است",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),Metronic.unblockUI("body"));var r=JSON.parse(e);if(""!=r.error)return"User.015"==r.ErrorCode&&(window.location="./logout"),Metronic.alert({container:"#alert",place:"append",type:"danger",message:r.error,close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;if(""==r.error)window.location="/persons?success";else{if("logout"!=e)return Metronic.alert({container:"#alert",place:"append",type:"danger",message:"مشکل در اتصال به وب سرویس",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;window.location="./logout"}Metronic.unblockUI("body")}})}}),$("#form1 input").keypress(function(e){if(13==e.which)return $("#form1").validate()&&$("#form1").submit(),!1})},handleAddFactor=function(){$("#factor").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{number:{required:!0},issuanceDate:{required:!0,dateISO:!0},accountParty:{required:!0}},messages:{number:{required:"فیلد شماره الزامی میباشد"},issuanceDate:{required:"فیلد تاریخ الزامی میباشد",dateISO:"لطفا تاریخ معتبر وارد نمایید"},accountParty:{required:"فیلد طرف حساب الزامی میباشد"}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control"))},submitHandler:function(e){var r={},a=$("#submitValueHidden").val();"return"==$("#factorType").val()&&(r.fcRelationTypeId=$("#fcRelationTypeId").val(),r.fcHRelatedIds=$("#fcHRelatedIds").val()),r.fcFinalState="submit"==a?"1":"0",r.fcFactConfigId=$("#fcFactConfigId").val(),r.fcMainCode=$("#number").val(),r.fcSecondCode=$("#number2").val(),r.fcIssuanceDate=$("#issuanceDate").val(),r.fcPartyId=$("#accountParty").attr("data-id"),r.discount=$("#discount").val().trim().replace(/,/g,""),r.fcIncsPrice=$("#total_deduction").val().trim().replace(/,/g,""),r.fcDecsPrice=$("#total_addition").val().trim().replace(/,/g,"");var t=!1,o=$("#total_price").val();o.indexOf("-")>=0&&(t=!0),o=o.trim().replace(/[^0-9]\./g,"").replace(/-/g,""),t&&(o="-"+o),r.fcFinalPrice=o.trim().replace(/,/g,""),r.description=$("#description").val(),r.id=$("#factorId").val();var s=1,n={};$("#tbody_details").find("tr").each(function(){var e=$(this).data("counter"),r={};""!=$("#code_"+e).val()&&(r.fcRowId=s,r.code=$("#code_"+e).val(),r.fcInvArticleCategoryId=$("#stuffName_"+e).attr("data-groupId"),r.fcInvArticleId=$("#stuffName_"+e).attr("data-id"),r.fcMUnitsId=$("#unit_"+e).attr("data-id"),r.fcAmount=$("#count_"+e).val(),r.fcUnitPrice=$("#fee_"+e).val(),r.fcTotalPrice=$("#price_"+e).val(),r.tax=$("#tax_"+e).val(),r.duty=$("#duty_"+e).val(),r.discount=$("#discountRow_"+e).val(),r.description=$("#desc_"+e).val(),r.fcAmount=r.fcAmount.trim().replace(/,/g,""),r.fcUnitPrice=r.fcUnitPrice.trim().replace(/,/g,""),r.fcTotalPrice=r.fcTotalPrice.trim().replace(/,/g,""),r.tax=r.tax.trim().replace(/,/g,""),r.duty=r.duty.trim().replace(/,/g,""),r.discount=r.discount.trim().replace(/,/g,""),n[s]=r,s++)});var i=$("#backToReport").val(),c=[r,n];Metronic.blockUI({target:"body",boxed:!0,message:"در حال ثبت..."}),$.ajax({type:"POST",data:{data:JSON.stringify(c)},url:"/factor/saveAjax",success:function(e){var r=JSON.parse(e);""!=r.error?"User.015"==r.ErrorCode?window.location="./logout":Metronic.alert({container:"#alert",place:"append",type:"danger",message:r.error,close:"1",reset:"1",focus:"1",closeInSeconds:"10",icon:"warning"}):"true"==r.result?(c.id=r.id,c.factorCode=r.code,c.secondcode=r.secondcode,c.title=r.title,window.location="/factor/add?factorId="+c.id+"&succ=succ&factorCode="+c.factorCode+"&secondcode="+c.secondcode+"&title="+c.title+"&back="+i):"logout"==e?window.location="./logout":alert("Problem with web service"),Metronic.unblockUI("body")}})}}),$("#factor input").keypress(function(e){if(13==e.which)return!1})},handleArticls=function(){$("#articleForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{code:{required:!0},title:{required:!0},vahed:{required:!0},nameKhadamat:{required:!0}},messages:{code:{required:"لطفا این فیلد را پر نمایید"},title:{required:"لطفا این فیلد را پر نمایید"},vahed:{required:"لطفا این فیلد را پر نمایید"},nameKhadamat:{required:"لطفا این فیلد را پر نمایید"}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control")),e.insertAfter(r.closest(".kala").parent())},submitHandler:function(e){var r=new FormData(e);$.ajax({type:"POST",data:r,processData:!1,contentType:!1,cache:!1,url:"/article/saveAjax",success:function(e){var a=JSON.parse(e);if("codeError"==a.codeCheck){var t="true"==a.type?"کد کالا نباید تکراری باشد":"کد خدمات نباید تکراری باشد";return Metronic.alert({container:"#alert",place:"append",type:"danger",message:t,close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1}if("titleError"==a.titleCheck){var o="true"==a.type?"کالا تکراری می باشد،آیا مایل به ادامه عملیات هستید؟":"خدمات تکراری می باشد،آیا مایل به ادامه عملیات هستید؟";bootbox.confirm(o,function(e){e&&$.ajax({type:"POST",data:r,processData:!1,contentType:!1,cache:!1,url:"/article/saveAjax?repeat=true",success:function(){window.location="/article?success=true"}})})}var s=JSON.parse(e);if(""!=s.error)return"User.015"==s.ErrorCode&&(window.location="./logout"),1!=a.option&&(Metronic.alert({container:"#alert",place:"append",type:"danger",message:s.error,close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1);if(""==s.error)window.location="/article?success=true";else{if("logout"!=e)return Metronic.alert({container:"#alert",place:"append",type:"danger",message:"مشکل در اتصال به وب سرویس",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;window.location="./logout"}}})}}),$("#form1 input").keypress(function(e){if(13==e.which)return $("#form1").validate()&&$("#form1").submit(),!1})},checkFinancialPeriodAndRedirect=function(e){e.financialPeriodCheckPerm?window.location="./financialPeriod/choose":1==isSpod?window.location="./dashBoard":window.location="./dashboard"},handleRecivingPayment=function(){$("#recivingPaymentForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{joinNumber:{required:!0},joinDate:{dateISO:!0,required:!0},hous:{required:!0},cashMonyDate:{dateISO:!0,required:!0},cashMonyAmount:{required:!0},cardreaderMonyAmount:{required:!0},cardreaderRejesterNumber:{required:!0},cardreaderDate:{dateISO:!0,required:!0},cardreaderTransactionserial:{required:!0},InternetOperationDate:{dateISO:!0,required:!0},InternetOperationPursueNumber:{required:!0},InternetOperationMonyAmount:{required:!0},BankiFicheAcountNumber:{required:!0},BankiFicheNumber:{required:!0},BankiFicheMonyAmount:{required:!0},ATMbankStart:{required:!0},ATMstartAcountNumber:{required:!0},ATMbankEnd:{required:!0},ATMdate:{dateISO:!0,required:!0},ATMretrievalNumber:{required:!0},BankiFicheDate:{dateISO:!0,required:!0}},messages:{joinNumber:{required:"لطفا این فیلد را پر نمایید"},joinDate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"},hous:{required:"لطفا این فیلد را پر نمایید"},cashMonyDate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"},cashMonyAmount:{required:"لطفا این فیلد را پر نمایید"},cardreaderMonyAmount:{required:"لطفا این فیلد را پر نمایید"},cardreaderRejesterNumber:{required:"لطفا این فیلد را پر نمایید"},cardreaderDate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"},cardreaderTransactionserial:{required:"لطفا این فیلد را پر نمایید"},InternetOperationDate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"},InternetOperationPursueNumber:{required:"لطفا این فیلد را پر نمایید"},InternetOperationMonyAmount:{required:"لطفا این فیلد را پر نمایید"},BankiFicheAcountNumber:{required:"لطفا این فیلد را پر نمایید"},BankiFicheNumber:{required:"لطفا این فیلد را پر نمایید"},BankiFicheMonyAmount:{required:"لطفا این فیلد را پر نمایید"},ATMbankStart:{required:"لطفا این فیلد را پر نمایید"},ATMstartAcountNumber:{required:"لطفا این فیلد را پر نمایید"},ATMbankEnd:{required:"لطفا این فیلد را پر نمایید"},ATMdate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"},ATMretrievalNumber:{required:"لطفا این فیلد را پر نمایید"},BankiFicheDate:{dateISO:"لطفا یک تاریخ معتبر را وارد نمایید",required:"لطفا این فیلد را پر نمایید"}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control").css("border-color","#ebccd1")),e.insertAfter(r.closest(".dateInputs").parent()),e.insertAfter(r.closest(".bankInput").parent())},submitHandler:function(e,r){r.preventDefault();var a=null!=$("#cardreaderBank").data("id")?$("#cardreaderBank").data("id"):"",t=null!=$("#InternetOperationBank").data("id")?$("#InternetOperationBank").data("id"):"",o=null!=$("#BankiFicheBankResiveGet").data("id")?$("#BankiFicheBankResiveGet").data("id"):"",s=null!=$("#ATMbankStart").data("id")?$("#ATMbankStart").data("id"):"",n=null!=$("#ATMbankEnd").data("id")?$("#ATMbankEnd").data("id"):"",i=new FormData(e);i.append("cardreaderBankId",a),i.append("InternetOperationBankId",t),i.append("BankiFicheBankResiveGetId",o),i.append("ATMbankStartId",s),i.append("ATMbankEndId",n),$.ajax({type:"POST",data:i,url:"/recivingPayment/saveAjax",processData:!1,contentType:!1,success:function(e){}})}})},handleFundDifination=function(){$("#fundDifinationForm").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!0,rules:{title:{required:!0},inaugurateDate:{dateISO:!0}},messages:{title:{required:"لطفا این فیلد را پر نمایید"},inaugurateDate:{dateISO:"لطفاً یک تاریخ معتبر وارد نمایید."}},invalidHandler:function(e,r){},highlight:function(e){$(e).closest(".form-group").removeClass("has-success").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-error")},success:function(e){e.closest(".form-group").removeClass("has-error").addClass("has-success"),e.remove()},errorPlacement:function(e,r){e.insertAfter(r.closest(".form-control"))},submitHandler:function(e,r){r.preventDefault();var a=null!=$("#centerName").attr("data-id")?$("#centerName").attr("data-id"):"",t=new FormData(e);t.append("CenterNameId",a),$.ajax({type:"POST",data:t,url:"/fundDifination/saveAjax",processData:!1,contentType:!1,success:function(e){if("true"!=e)return Metronic.alert({container:"#alert",place:"append",type:"danger",message:"خطایی رخ داده است",close:"1",reset:"1",focus:"1",closeInSeconds:"5",icon:"warning"}),!1;window.location.assign("/fundDifination/index?success=true")}})}})};